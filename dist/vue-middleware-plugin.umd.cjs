(function(r,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],l):(r=typeof globalThis<"u"?globalThis:r||self,l(r.VueMiddlewarePlugin={},r.Vue))})(this,function(r,l){"use strict";let u=l.reactive({}),d=l.reactive({}),i=l.reactive({});const a=()=>({request:u,model:d,params:i}),m=()=>d,w=async e=>{var o,n;if(u=e.to.query,!((o=e.to.meta)!=null&&o.controller))throw new Error("Controller not defined");if(!((n=e.to.meta)!=null&&n.controller.length))throw new Error("Controller/Method not defined");e.to.params,i=h(e.to.params),d=new e.to.meta.controller[0];const t=e.to.meta.controller[1];await d[t](i.id),console.log(d.model.comments)};function h(e){return Object.keys(e).forEach(t=>{e[t]?e[t]=Number(e[t]):e[t]===""&&(e[t]=null)}),e}const c=(e,t,o)=>{const n=t[o];return n?(...s)=>{c(e,t,o+1),n({...e})}:e.next},M=(e,t,o)=>{var n;if((n=t.meta)!=null&&n.middleware){const s=Array.isArray(t.meta.middleware)?t.meta.middleware:[t.meta.middleware],f={from:e,to:t,router:o},q=c(f,s,1);return s[0]({...f,next:q})}},b={install:(e,t)=>{t.beforeEach((o,n)=>{M(n,o,t)})}};function p(e){return function(t){return e?{...t.params,id:parseInt(e)}:t.params}}r.MiddlewarePlugin=b,r.castId=p,r.requestsInjection=w,r.useController=a,r.useModel=m,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=vue-middleware-plugin.umd.cjs.map
